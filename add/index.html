<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>添加新应用 - 氢商店</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <script src="/js/theme.js"></script>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
    <header class="top-bar">
        <div class="top-bar-content">
            <a href="/index.html" style="text-decoration:none; display:flex; align-items:center; color:inherit;">
                <span class="material-symbols-rounded">arrow_back</span>
                <h1>返回商店</h1>
            </a>
        </div>
    </header>

    <main style="padding-bottom: 40px;">
        <div class="form-container">
            <h2 style="margin-bottom: 24px; font-family: 'Google Sans';">录入新应用</h2>
            
            <div class="preview-section">
                <div class="preview-header">推荐卡片效果 (Hero)</div>
                <div class="ph-card" id="prev-hero-card">
                    <img id="prev-hero-img" class="ph-img" src="">
                    <div class="ph-content">
                        <span class="ph-tag">编辑推荐</span>
                        <div class="ph-title" id="prev-hero-title">应用名称</div>
                        <div class="ph-desc" id="prev-hero-desc">一句话简介...</div>
                    </div>
                </div>
                <div class="preview-header" style="margin-top:24px;">列表项效果 (List Item)</div>
                <div class="pl-item">
                    <img id="prev-icon-img" class="pl-icon" src="" style="display:none;">
                    <div id="prev-icon-placeholder" class="pl-icon" style="display:flex; align-items:center; justify-content:center; color:#999;">
                        <span class="material-symbols-rounded">image</span>
                    </div>
                    <div class="pl-info">
                        <div class="pl-name" id="prev-list-name">应用名称</div>
                        <div class="pl-meta" id="prev-list-meta">标签1 · 标签2</div>
                    </div>
                    <div class="pl-btn">获取</div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">ID (自动计算)</label>
                <input type="number" id="inp-id" class="form-input" readonly style="background-color: var(--md-sys-color-surface-container-high); opacity: 0.7;">
            </div>

            <div class="row">
                <div class="col form-group">
                    <label class="form-label">应用名称</label>
                    <input type="text" id="inp-name" class="form-input" placeholder="例如: 微信">
                </div>
                <div class="col form-group">
                    <label class="form-label">开发者</label>
                    <input type="text" id="inp-developer" class="form-input" placeholder="例如: Tencent">
                </div>
            </div>

            <!-- 🌟 新增：包名和版本 -->
            <div class="row">
                <div class="col form-group">
                    <label class="form-label">包名 (Package Name)</label>
                    <input type="text" id="inp-pkg" class="form-input" placeholder="com.example.app">
                </div>
                <div class="col form-group">
                    <label class="form-label">版本号 (Version)</label>
                    <input type="text" id="inp-ver" class="form-input" placeholder="1.0.0">
                </div>
            </div>

            <div class="row">
                <div class="col form-group">
                    <label class="form-label">更新日期</label>
                    <input type="date" id="inp-date" class="form-input">
                </div>
                <div class="col form-group">
                    <label class="form-label">Android 版本</label>
                    <input type="text" id="inp-version" class="form-input" placeholder="例如: Android 10.0+" value="Android 10.0+">
                </div>
            </div>

            <!-- 🌟 修改：架构多选 -->
            <div class="form-group">
                <label class="form-label">支持架构 (可多选)</label>
                <div class="checkbox-group">
                    <label class="checkbox-item"><input type="checkbox" name="arch" value="arm64-v8a" checked><span class="checkbox-label">arm64-v8a</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="arch" value="armeabi-v7a"><span class="checkbox-label">armeabi-v7a</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="arch" value="x86_64"><span class="checkbox-label">x86_64</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="arch" value="x86"><span class="checkbox-label">x86</span></label>
                    <label class="checkbox-item"><input type="checkbox" name="arch" value="Universal"><span class="checkbox-label">Universal</span></label>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">类型</label>
                <select id="inp-type" class="form-select">
                    <option value="app">应用 (App)</option>
                    <option value="game">游戏 (Game)</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">分类标签 (用半角逗号分隔)</label>
                <input type="text" id="inp-tags" class="form-input" placeholder="例如: 社交, 通讯, 聊天">
            </div>

            <div class="form-group">
                <label class="form-label">图标链接 (Icon URL)</label>
                <input type="text" id="inp-icon" class="form-input" placeholder="https://...">
            </div>

            <div class="form-group">
                <label class="form-label">封面背景色 (CSS Gradient)</label>
                <div class="input-group">
                    <input type="text" id="inp-cover" class="form-input" placeholder="linear-gradient(...)">
                    <button class="icon-btn-small" id="btn-random-color" title="随机生成">
                        <span class="material-symbols-rounded">casino</span>
                    </button>
                    <button class="icon-btn-small" id="btn-open-gen" title="打开调色板">
                        <span class="material-symbols-rounded">palette</span>
                    </button>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">封面大图 (Cover Image URL)</label>
                <input type="text" id="inp-cover-img" class="form-input" placeholder="可选: https://...">
            </div>

            <div class="form-group">
                <label class="form-label">下载链接</label>
                <input type="text" id="inp-download" class="form-input" placeholder="https://...">
            </div>

            <div class="form-group">
                <label class="form-label">简介</label>
                <input type="text" id="inp-desc" class="form-input" placeholder="列表页显示的短介绍">
            </div>

            <div class="form-group">
                <label class="form-label">详细介绍</label>
                <textarea id="inp-long-desc" class="form-textarea" placeholder="详情页显示的长介绍..."></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">截图链接 (一行一个 URL)</label>
                <textarea id="inp-screenshots" class="form-textarea" placeholder="https://img1.jpg&#10;https://img2.jpg"></textarea>
            </div>

            <div class="switch-container">
                <span class="switch-label">设为首页推荐 (Featured)</span>
                <label class="switch">
                    <input type="checkbox" id="inp-featured">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="btn-row">
                <button class="btn-primary" id="btn-generate">生成 JSON 代码</button>
            </div>

            <div id="output-area" style="display:none; margin-top:24px;">
                <h3 style="font-size:16px; margin-bottom:12px;">🎉 生成成功！请复制以下代码：</h3>
                <p style="font-size:12px; color:#B3261E; margin-bottom:8px;">注意：请复制并粘贴到 apps.json 文件的末尾（在最后一个 ] 之前）。</p>
                <pre class="code-preview" id="code-result"></pre>
                <button class="btn-secondary" id="btn-copy" style="width:100%; margin-top:12px;">复制到剪贴板</button>
            </div>
        </div>
    </main>

    <div class="modal-overlay" id="gen-overlay"></div>
    <div class="generator-modal" id="gen-modal">
        <h3 style="margin-bottom:16px; font-family:'Google Sans';">渐变生成器</h3>
        <div class="gen-preview-box" id="gen-preview"></div>
        <div class="gen-controls">
            <div class="gen-row"><span>颜色 A</span><input type="color" id="gen-color1" class="color-picker" value="#ff9a9e"></div>
            <div class="gen-row"><span>颜色 B</span><input type="color" id="gen-color2" class="color-picker" value="#fecfef"></div>
            <div class="gen-row"><span>角度: <span id="gen-angle-val">135</span>°</span></div>
            <input type="range" id="gen-angle" class="range-slider" min="0" max="360" value="135">
        </div>
        <button class="btn-primary" id="btn-apply-gen" style="width:100%; margin-top:20px;">应用到表单</button>
    </div>

    <div id="toast" class="toast"></div>
    <script src="script.js"></script>
</body>
</html>
